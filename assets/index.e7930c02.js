import{j as S,r as u,a as D,R as C,b as O}from"./vendor.26b63288.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function d(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerpolicy&&(t.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?t.credentials="include":s.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(s){if(s.ep)return;s.ep=!0;const t=d(s);fetch(s.href,t)}};R();const E="a",B="b",k="c",w="e",A="f";var g={container:E,textarea:B,title:k,bar:w,count:A};const I="g";var L={button:I};const c=S.exports.jsx,p=S.exports.jsxs,N=({text:r,onClick:e})=>c("button",{className:L.button,onClick:e,children:r}),T=r=>r.replace(/\s+/g," ").replace(/,+/g,","),j=r=>r.split(", ").map(e=>T(e).trim()).filter(e=>e!==""),M="h",$="i",K="j",P="k";var m={tags:M,tag:$,cross:K,danger:P};const q=(...r)=>r.filter(e=>!!e).join(" "),z=({tags:r,onClickRemove:e,setTags:d})=>{const[l,s]=u.exports.useState(!1),t=u.exports.useRef(null),i=u.exports.useRef(null),v=a=>{a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",null),t.current=a.target,t.current.style.opacity=.5},h=()=>{t.current.style.opacity=1,t.current=null},x=a=>{!t.current||(y(t.current,a.target)?i.current.insertBefore(t.current,a.target):i.current.insertBefore(t.current,a.target.nextSibling))},y=(a,n)=>{let o;if(n.parentNode===a.parentNode){for(o=a.previousSibling;o;o=o.previousSibling)if(o===n)return!0}return!1};return c("div",{className:m.tags,ref:i,children:r.map((a,n)=>p("div",{className:q(m.tag,n===l&&m.danger),draggable:n!==l,onDragStart:v,onDragEnd:h,onDragOver:x,children:[a,c("button",{className:m.cross,onClick:()=>e(n),onMouseEnter:()=>s(n),onMouseLeave:()=>s(null),onDragStart:o=>o.stopPropagation(),children:"\u2716"})]},`${n}`))})},F=r=>r.filter((e,d,l)=>l.indexOf(e)===d);function H(){const[r,e]=u.exports.useState([]),[d,l]=u.exports.useState(""),s=u.exports.useRef(null);u.exports.useEffect(()=>{let n=localStorage.getItem("tags")||"[]";e(JSON.parse(n))},[]),u.exports.useEffect(()=>{D(s.current),t()},[r]);const t=()=>{localStorage.setItem("tags",JSON.stringify(r))},i=({target:{value:n}})=>{let o=n,f=o.match(/\s*,*\s*$/)[0];f=T(f),o=o.replace(/\s*,\s*/g,", ");let b=j(o);l(f),e(b)},v=()=>{const n=r.join(", ").replace(/[\s,]+/g,", ");e(j(n))},h=()=>l(""),x=n=>{/[0-9А-яЁёA-Za-z_@\-',.\s]/.test(n.key)||n.preventDefault()},y=()=>e(F(r)),a=n=>{const o=r.filter((f,b)=>b!==n);e(o)};return p("div",{className:g.container,children:[c("h1",{className:g.title,children:"Simple Tag Editor"}),p("div",{className:g.bar,children:[p("div",{children:[c(N,{text:"_ > ,",onClick:v}),c(N,{text:"Clean",onClick:y})]}),c("div",{className:g.count,children:r.length})]}),c("textarea",{className:g.textarea,onChange:i,onKeyDown:x,onBlur:h,value:r.join(", ")+d,ref:s}),c(z,{tags:r,onClickRemove:a,setTags:e})]})}C.render(c(O.StrictMode,{children:c(H,{})}),document.getElementById("app"));
