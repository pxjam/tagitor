import{j as S,r as u,a as D,R as O,b as R}from"./vendor.26b63288.js";const C=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function d(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=d(r);fetch(r.href,s)}};C();const E="a",B="b",k="c",w="e",A="f";var g={container:E,textarea:B,title:k,bar:w,count:A};const I="g";var L={button:I};const c=S.exports.jsx,p=S.exports.jsxs,N=({text:t,onClick:e})=>c("button",{className:L.button,onClick:e,children:t}),T=t=>t.replace(/\s+/g," ").replace(/,+/g,","),j=t=>t.split(", ").map(e=>T(e).trim()).filter(e=>e!==""),M="h",$="i",q="j",K="k";var m={tags:M,tag:$,cross:q,danger:K};const P=(...t)=>t.filter(e=>!!e).join(" "),z=({tags:t,onClickRemove:e,setTags:d})=>{const[l,r]=u.exports.useState(!1),s=u.exports.useRef(null),i=u.exports.useRef(null),v=a=>{a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",null),s.current=a.target,s.current.style.opacity=.5},h=()=>{s.current.style.opacity=1,s.current=null},x=a=>{y(s.current,a.target)?i.current.insertBefore(s.current,a.target):i.current.insertBefore(s.current,a.target.nextSibling)},y=(a,n)=>{let o;if(n.parentNode===a.parentNode){for(o=a.previousSibling;o;o=o.previousSibling)if(o===n)return!0}return!1};return c("div",{className:m.tags,ref:i,children:t.map((a,n)=>p("div",{className:P(m.tag,n===l&&m.danger),draggable:n!==l,onDragStart:v,onDragEnd:h,onDragOver:x,children:[a,c("button",{className:m.cross,onClick:()=>e(n),onMouseEnter:()=>r(n),onMouseLeave:()=>r(null),onDragStart:o=>o.stopPropagation(),children:"\u2716"})]},`${n}`))})},F=t=>t.filter((e,d,l)=>l.indexOf(e)===d);function H(){const[t,e]=u.exports.useState([]),[d,l]=u.exports.useState(""),r=u.exports.useRef(null);u.exports.useEffect(()=>{let n=localStorage.getItem("tags")||"[]";e(JSON.parse(n))},[]),u.exports.useEffect(()=>{D(r.current),s()},[t]);const s=()=>{localStorage.setItem("tags",JSON.stringify(t))},i=({target:{value:n}})=>{let o=n,f=o.match(/\s*,*\s*$/)[0];f=T(f),o=o.replace(/\s*,\s*/g,", ");let b=j(o);l(f),e(b)},v=()=>{const n=t.join(", ").replace(/[\s,]+/g,", ");e(j(n))},h=()=>l(""),x=n=>{/[0-9А-яЁёA-Za-z_@\-',.\s]/.test(n.key)||n.preventDefault()},y=()=>e(F(t)),a=n=>{const o=t.filter((f,b)=>b!==n);e(o)};return p("div",{className:g.container,children:[c("h1",{className:g.title,children:"Simple Tag Editor"}),p("div",{className:g.bar,children:[p("div",{children:[c(N,{text:"_ > ,",onClick:v}),c(N,{text:"Unique",onClick:y})]}),c("div",{className:g.count,children:t.length})]}),c("textarea",{className:g.textarea,onChange:i,onKeyDown:x,onBlur:h,value:t.join(", ")+d,ref:r}),c(z,{tags:t,onClickRemove:a,setTags:e})]})}O.render(c(R.StrictMode,{children:c(H,{})}),document.getElementById("app"));
