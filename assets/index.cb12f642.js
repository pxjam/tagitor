import{j as N,r as g,a as R,R as E,b as O}from"./vendor.26b63288.js";const k=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const u of e.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function v(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(t){if(t.ep)return;t.ep=!0;const e=v(t);fetch(t.href,e)}};k();const B="a",I="b",w="c",A="e",L="f";var m={container:B,textarea:I,title:w,bar:A,count:L};const M="g";var $={button:M};const c=N.exports.jsx,x=N.exports.jsxs;function D({text:n,onClick:r}){return c("button",{className:$.button,onClick:r,children:n})}function j(n){return n.replace(/\s+/g," ").replace(/,+/g,",")}const K="h",P="i",z="j",F="k";var y={tags:K,tag:P,cross:z,danger:F};function H(...n){return n.filter(r=>!!r).join(" ")}function J({tags:n,onClickRemove:r,setTags:v}){const[d,t]=g.exports.useState(!1),e=g.exports.useRef(null),u=g.exports.useRef(null);function b(s){s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",null),e.current=s.target,e.current.style.opacity=.5}function h(){e.current.style.opacity=1,e.current=null}function S(s){!e.current||(T(e.current,s.target)?u.current.insertBefore(e.current,s.target):u.current.insertBefore(e.current,s.target.nextSibling))}function T(s,i){let l;if(i.parentNode===s.parentNode){for(l=s.previousSibling;l;l=l.previousSibling)if(l===i)return!0}return!1}return c("div",{className:y.tags,ref:u,children:n.map((s,i)=>x("div",{className:H(y.tag,i===d&&y.danger),draggable:i!==d,onDragStart:b,onDragEnd:h,onDragOver:S,children:[s.value,c("button",{className:y.cross,onClick:()=>r(i),onMouseEnter:()=>t(i),onMouseLeave:()=>t(null),onDragStart:l=>l.stopPropagation(),children:"\u2716"})]},`${i}`))})}function C(n){return j(n).split(", ").map(r=>r.trim()).filter(r=>r!=="")}function _(){const[n,r]=g.exports.useState([]),[v,d]=g.exports.useState(""),t=g.exports.useRef(null);g.exports.useEffect(()=>{let a=localStorage.getItem("tags")||"[]";r(JSON.parse(a))},[]),g.exports.useEffect(()=>{R(t.current),e()},[n]);function e(){localStorage.setItem("tags",JSON.stringify(n))}function u({target:{value:a}}){let o=a,f=o.match(/\s*,*\s*$/)[0];f=j(f),o=o.replace(/\s*,\s*/g,", ");let p=C(o);d(f),r(h(p))}function b(){const a=l(n).replace(/[\s,]+/g,", "),o=C(a);r(h(o))}function h(a){return a.map((o,f)=>({id:f,value:o.trim()}))}function S(){d("")}function T(a){/[0-9А-яЁёA-Za-z_@\-',.\s]/.test(a.key)||a.preventDefault()}function s(){let a=[],o=0;n.forEach(f=>{a.findIndex(p=>p.value===f.value)===-1&&a.push({id:o++,value:f.value})}),r(a)}function i(a){const o=n.filter((f,p)=>p!==a);r(o)}function l(a){return a.map(o=>o.value).join(", ")}return x("div",{className:m.container,children:[c("h1",{className:m.title,children:"Simple Tag Editor"}),x("div",{className:m.bar,children:[x("div",{children:[c(D,{text:"_ > ,",onClick:b}),c(D,{text:"Clean",onClick:s})]}),c("div",{className:m.count,children:n.length})]}),c("textarea",{className:m.textarea,onChange:u,onKeyDown:T,onBlur:S,value:l(n)+v,ref:t}),c(J,{tags:n,onClickRemove:i,setTags:r})]})}E.render(c(O.StrictMode,{children:c(_,{})}),document.getElementById("app"));
