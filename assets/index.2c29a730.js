import{j as S,r as u,a as D,R as C,b as O}from"./vendor.26b63288.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function f(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(n){if(n.ep)return;n.ep=!0;const t=f(n);fetch(n.href,t)}};R();const E="a",B="b",k="c",w="e",A="f";var d={container:E,textarea:B,title:k,bar:w,count:A};const I="g";var L={button:I};const c=S.exports.jsx,p=S.exports.jsxs;function N({text:r,onClick:e}){return c("button",{className:L.button,onClick:e,children:r})}function T(r){return r.replace(/\s+/g," ").replace(/,+/g,",")}function j(r){return r.split(", ").map(e=>T(e).trim()).filter(e=>e!=="")}const M="h",$="i",K="j",P="k";var m={tags:M,tag:$,cross:K,danger:P};function q(...r){return r.filter(e=>!!e).join(" ")}function z({tags:r,onClickRemove:e,setTags:f}){const[i,n]=u.exports.useState(!1),t=u.exports.useRef(null),l=u.exports.useRef(null);function v(a){a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",null),t.current=a.target,t.current.style.opacity=.5}function h(){t.current.style.opacity=1,t.current=null}function x(a){!t.current||(y(t.current,a.target)?l.current.insertBefore(t.current,a.target):l.current.insertBefore(t.current,a.target.nextSibling))}function y(a,o){let s;if(o.parentNode===a.parentNode){for(s=a.previousSibling;s;s=s.previousSibling)if(s===o)return!0}return!1}return c("div",{className:m.tags,ref:l,children:r.map((a,o)=>p("div",{className:q(m.tag,o===i&&m.danger),draggable:o!==i,onDragStart:v,onDragEnd:h,onDragOver:x,children:[a,c("button",{className:m.cross,onClick:()=>e(o),onMouseEnter:()=>n(o),onMouseLeave:()=>n(null),onDragStart:s=>s.stopPropagation(),children:"\u2716"})]},`${o}`))})}function F(r){return r.filter((e,f,i)=>i.indexOf(e)===f)}function H(){const[r,e]=u.exports.useState([]),[f,i]=u.exports.useState(""),n=u.exports.useRef(null);u.exports.useEffect(()=>{let o=localStorage.getItem("tags")||"[]";e(JSON.parse(o))},[]),u.exports.useEffect(()=>{D(n.current),t()},[r]);function t(){localStorage.setItem("tags",JSON.stringify(r))}function l({target:{value:o}}){let s=o,g=s.match(/\s*,*\s*$/)[0];g=T(g),s=s.replace(/\s*,\s*/g,", ");let b=j(s);i(g),e(b)}function v(){const o=r.join(", ").replace(/[\s,]+/g,", ");e(j(o))}function h(){i("")}function x(o){/[0-9А-яЁёA-Za-z_@\-',.\s]/.test(o.key)||o.preventDefault()}function y(){e(F(r))}function a(o){const s=r.filter((g,b)=>b!==o);e(s)}return p("div",{className:d.container,children:[c("h1",{className:d.title,children:"Simple Tag Editor"}),p("div",{className:d.bar,children:[p("div",{children:[c(N,{text:"_ > ,",onClick:v}),c(N,{text:"Clean",onClick:y})]}),c("div",{className:d.count,children:r.length})]}),c("textarea",{className:d.textarea,onChange:l,onKeyDown:x,onBlur:h,value:r.join(", ")+f,ref:n}),c(z,{tags:r,onClickRemove:a,setTags:e})]})}C.render(c(O.StrictMode,{children:c(H,{})}),document.getElementById("app"));
